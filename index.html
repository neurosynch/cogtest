<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COG Test</title>
    <style>
        /* Inline CSS for jsPsych */
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .jspsych-display-element {
            font-size: 24px;
            color: #333;
            text-align: center;
        }
        p {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <script>
        // Lightweight jsPsych-like implementation
        (function() {
            const jsPsych = {
                run: function(timeline) {
                    let index = 0;
                    const display = document.createElement('div');
                    display.className = 'jspsych-display-element';
                    document.body.appendChild(display);

                    function showTrial() {
                        if (index < timeline.length) {
                            const trial = timeline[index];
                            display.innerHTML = trial.stimulus;

                            document.onkeydown = (e) => {
                                if (trial.choices.includes(e.key)) {
                                    index++;
                                    showTrial();
                                }
                            };
                        } else {
                            display.innerHTML = "<p>Experiment Complete! Thank you for participating.</p>";
                        }
                    }

                    showTrial();
                }
            };

            // Define the experiment timeline
            const timeline = [
                {
                    stimulus: "<p>Welcome to the COG Test!</p><p>Press 'R' for RED or 'B' for BLUE.</p><p>Press any key to start.</p>",
                    choices: ['r', 'b', ' ']
                },
                {
                    stimulus: "<p style='color: red; font-size: 48px;'>BLUE</p><p>Press 'R' for RED or 'B' for BLUE.</p>",
                    choices: ['r', 'b']
                },
                {
                    stimulus: "<p style='color: blue; font-size: 48px;'>RED</p><p>Press 'R' for RED or 'B' for BLUE.</p>",
                    choices: ['r', 'b']
                },
                {
                    stimulus: "<p>Thank you for completing the COG Test!</p>",
                    choices: [' ']
                }
            ];

            // Run the experiment
            jsPsych.run(timeline);
        })();
    </script>
</body>
</html>